{% extends "base.html" %}
{% block main %}
	<div class="p-3 p-lg-5 d-flex flex-column text-center">
		<h2 style="margin-bottom: 10%">登陆</h2>
		<form class="form-control" style="padding:70px 0px" name="login_form" id="login_form" method="post" action="/login">
			<div class="form-group">
				<label><h4 class="text-primary">用户名：</h4><input name="login_name" type="text" class="form-control" placeholder="请输入用户名"/></label>
			</div>
			<span class="errorspan" name="errorloginname" style="color:red;font-size:1rem">{{errormessage}}</span>
			<div class="form-group">
				<label><h4 class="text-primary">密码：</h4><input name="login_password" type="password" class="form-control" placeholder="请输入8-16位密码"/>
			</div>
			</label><span class="errorspan" name="errorloginpassword" style="color:red;font-size:1rem"></span>
			<div class="form-group">
				<input type="button" value="提交" class="btn-light" onclick="loginsubmitForm()" /><a href="/register" style="margin-left: 1rem">还未注册？</a>
			</div>
		</form>  
	</div>
    {% endblock %}
    {% block script %}
    <script type="text/javascript">
    	var login_flag=0;
    	var login_flag1=0;
    	$(document).ready(function() {
    		login_name=$('[name="login_name"]');
    		login_password=$('[name="login_password"]');
    		login_name.keyup(function(event) {
    			if (login_name.val().length<5) {
    				$('span[name="errorloginname"]').text("用户名长度必须大于四个个字符！");
    				login_flag=0;
    			}
    			else
    			{
    				$('span[name="errorloginname"]').text("");
    				login_flag=1;
    			}
    		});

    		login_password.keyup(function(event) {
    			if (login_password.val().length<8||login_password.val().length>16) {
    				$('span[name="errorloginpassword"]').text("密码长度为8-16位！");
    				login_flag1=0;
    			}
    			else
    			{
    				$('span[name="errorloginpassword"]').text("");
    				login_flag1=1;
    			}
    		});
    		
    	});

		function loginsubmitForm(){
			if (login_flag==1&&login_flag1==1) {
				var form=document.getElementById('login_form');
				form.submit()
				// alert("提交成功，跳转中！")
			}
			else
			{
				alert('登陆有误，请检查！')
				return
			}
		}
    </script>
    {% endblock %}